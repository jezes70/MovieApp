<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>MovieVerse</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <link rel="icon" type="image/png" href="/favicon.png" />
</head>
<body>
  <!-- Navbar -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-dark">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link text-white" href="/users/logout">Logout</a>
          </li>
        </ul>
      </div>
    </nav>
  </header>
  <main>
    <section class="container-fluid py-5 text-center background-image" style="color: #ccc">
      <h1>My Movies Collection</h1>
      <button id="add-movie-button" class="my-btn">
        Add movie
      </button>
    </section>

    <!-- Add movie form -->
    <div class="container-fluid mt-2">
      <form id="add-movie-form" action="/dashboard" method="POST">
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" class="form-control" id="title" name="title"
            style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
        </div>
        <div class="form-group">
          <label for="description">Description</label>
          <textarea class="form-control" id="description" name="description" rows="3"
            style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;"></textarea>
        </div>
        <div class="form-group">
          <label for="price">Price</label>
          <input type="text" class="form-control" id="price" name="price"
            style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
        </div>
        <div class="form-group">
          <label for="image-url">Image URL</label>
          <input type="text" class="form-control" id="image" name="image"
            style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
        </div>
        <div class="card-buttons">
          <div class="button-wrapper">
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
          <div class="button-wrapper">
            <a href="/dashboard" class="btn btn-primary">Cancel</a>
          </div>
        </div>        
      </form>
    </div>

    <!-- Movies Section -->
    <section class="movies">
      <div class="card-container row row-cols-4 row-cols-md-3 row-cols-lg-4 g-3">
        <% movieList.forEach((movie)=> { %>
          <div class="col mb-3">
            <div class="movie-card">
              <div class="card">
                <img src=<%=movie.image %> class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    <%= movie.title %>
                  </h5>
                  <h6 class="card-subtitle mb-2 text-muted">â‚¦<%= movie.price %>
                  </h6>
                  <p class="card-text">
                    <%= movie.description %>
                  </p>
                </div>
                <div class="card-buttons-container">
                  <button id="update-movie-button" class="btn mr-2"><ion-icon name="pencil-outline"></ion-icon></button>
                  <a href="/delete/<%=movie.id%>" class="btn mr-2"><ion-icon name="trash-outline"></ion-icon></a>
                </div>

                <!-- Update movie form -->
                <form id="update-movie-form" class="update-form" action="/update/<%= movie.id %>" method="POST" style="display:none;">
                  <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" class="form-control" id="title" name="title" value="<%= movie.title %>"
                      style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
                  </div>
                  <div class="form-group">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" name="description" rows="3"
                      style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;">
                      <%= movie.description %>
                    </textarea>

                  </div>
                  <div class="form-group">
                    <label for="price">Price</label>
                    <input type="text" class="form-control" id="price" name="price" value="<%= movie.price %>"
                      style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
                  </div>
                  <div class="form-group">
                    <label for="image-url">Image URL</label>
                    <input type="text" class="form-control" id="image" name="image" value="<%= movie.image %>"
                      style="background-color: #343a40; border: none; color: #fff; font-family: Arial, sans-serif;" />
                  </div>
                  <div class="card-buttons">
                    <div class="button-wrapper">
                      <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                    <div class="button-wrapper">
                      <a href="/dashboard" class="btn btn-primary">Cancel</a>
                    </div>
                  </div>   
                </form>
              </div>
              </div>
          </div>
          <% }) %>
      </div>
      </div>
    </section>
    <script src="/javaScript/app.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>

